<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">
					
	<h:form>
							
		<p:messages globalOnly="false" showSummary="false" showDetail="true" closable="true"/>

		<p:focus/>
		
		<p:panelGrid styleClass="form-panel">
			
			<p:row>
				<p:column colspan="2" styleClass="form-header">
					<h:outputText value="Il pannello permette di inserire e modificare i dati relativi all'utente."/>
				</p:column>
			</p:row>
						
			<p:row>
				<p:column>
		
					<p:panelGrid styleClass="form-panel">
									
						<p:row>
							<p:column>
								<p:outputLabel for="username" value="Username:" />
							</p:column>
							<p:column>
								<p:inputText value="#{dettaglioUtente.username}" id="username"
									required="true" requiredMessage="Il campo username è obbligatorio"/>
								<p:watermark for="username" value="Identificativo dell\'utente" />
							</p:column>
						</p:row>
									
						<p:row>
							<p:column>
								<p:outputLabel for="nome" value="Nome:" />
							</p:column>
							<p:column>
								<p:inputText value="#{dettaglioUtente.nome}" id="nome"
									required="true" requiredMessage="Il campo nome è obbligatorio"/>
								<p:watermark for="nome" value="Nome dell\'utente" />
							</p:column>
						</p:row>
						
						<p:row>
							<p:column>
								<p:outputLabel for="cognome" value="Cognome:" />
							</p:column>
							<p:column>
								<p:inputText value="#{dettaglioUtente.cognome}" id="cognome"
									required="true" requiredMessage="Il campo cognome è obbligatorio"/>
								<p:watermark for="cognome" value="Cognome dell\'utente" />
							</p:column>
						</p:row>  
						
						<p:row>
							<p:column>
								<p:outputLabel for="note" value="Note:" />
							</p:column>
							<p:column>
								<p:inputTextarea value="#{dettaglioUtente.note}" id="note"/>
								<p:watermark for="note" value="Spazio per eventuali annotazioni" />  
							</p:column>
						</p:row>
					
					</p:panelGrid>
				
				</p:column>
				
				<p:column>
				
					<c:if test="#{not empty dettaglioUtente.id}">

						<p:panelGrid styleClass="form-panel">
						
							<p:row>
								<p:column>
									<p:outputLabel for="ultimoLogin" value="Ultimo login:" />
								</p:column>
								<p:column>
									<p:inputText value="#{dettaglioUtente.ultimoLogin}" id="ultimoLogin" disabled="true">
										<f:convertDateTime pattern="dd/MM/yyyy HH:mm" timeZone="#{appConfig.timeZone}" />
									</p:inputText>
								</p:column>
							</p:row>
						
							<p:row>
								<p:column>
									<p:outputLabel for="creazione" value="Creato il:" />
								</p:column>
								<p:column>
									<p:inputText value="#{dettaglioUtente.creazione}" id="creazione" disabled="true">
										<f:convertDateTime pattern="dd/MM/yyyy HH:mm" timeZone="#{appConfig.timeZone}" />
									</p:inputText>
								</p:column>
							</p:row>
						
							<p:row>
								<p:column>
									<p:outputLabel for="ultimaAttivazione" value="Ultima attivazione:" />
								</p:column>
								<p:column>
									<p:inputText value="#{dettaglioUtente.ultimaAttivazione}" id="ultimaAttivazione" disabled="true">
										<f:convertDateTime pattern="dd/MM/yyyy HH:mm" timeZone="#{appConfig.timeZone}" />
									</p:inputText>
								</p:column>
							</p:row>
						
							<p:row>
								<p:column>
									<p:outputLabel for="ultimaDisattivazione" value="Ultima disattivazione:" />
								</p:column>
								<p:column>
									<p:inputText value="#{dettaglioUtente.ultimaDisattivazione}" id="ultimaDisattivazione" disabled="true">
										<f:convertDateTime pattern="dd/MM/yyyy HH:mm" timeZone="#{appConfig.timeZone}" />
									</p:inputText>
								</p:column>
							</p:row>
						
							<p:row>
								<p:column>
									<p:outputLabel for="attivo" value="Attivo:" />
								</p:column>
								<p:column>
									<p:selectBooleanCheckbox 
										id="attivo" 
										value="#{dettaglioUtente.attivo}"
										disabled="true"/>
								</p:column>
							</p:row>
							
						</p:panelGrid>
	
					</c:if>
			
					<c:if test="#{empty dettaglioUtente.id}">

						<p:panelGrid styleClass="form-panel">
						
							<p:row>
								<p:column>
									<p:outputLabel for="password" value="Password:" />
								</p:column>
								<p:column>
									<p:password value="#{dettaglioUtente.password}" id="password"
										required="true" requiredMessage="Il campo password è obbligatorio"
										feedback="true" inline="false"
										redisplay="true"
										promptLabel="Immettere la password"
										weakLabel="Password debole" 
										goodLabel="Password accettabile" 
										strongLabel="Password forte"/>
									<p:watermark for="password" value="Password iniziale di accesso" />
								</p:column>
							</p:row>
						
							<p:row>
								<p:column>
									<p:outputLabel for="confirmPassword" value="Conferma:" />
								</p:column>
								<p:column>
									<p:password value="#{dettaglioUtente.confirmPassword}" id="confirmPassword"
										required="true" requiredMessage="La conferma della password è obbligatoria"
										feedback="true" inline="false"
										redisplay="true"
										promptLabel="Confermare la password"
										weakLabel="Password debole" 
										goodLabel="Password accettabile" 
										strongLabel="Password forte"/>
									<p:watermark for="confirmPassword" value="Confermare la password" />
								</p:column>
							</p:row>
							
						</p:panelGrid>
					
					</c:if>
					
				</p:column>
				
			</p:row>
			
			<p:row>
			
				<p:column colspan="2" styleClass="form-footer">
					<p:commandButton value="Salva"
						actionListener="#{dettaglioUtente.doSave}"
						update=":tabView"/>
				</p:column>
				
			</p:row>
		
		</p:panelGrid>
				
	</h:form>

</html>