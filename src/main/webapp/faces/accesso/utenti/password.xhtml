<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

	<p:dialog 
		header="Imposta password" 
		widgetVar="changePasswordDialog" 
		modal="true"
		showEffect="fade" 
		hideEffect="fade"> 

		<h:form id="changePasswordForm">
		
			<p:messages globalOnly="true" autoUpdate="true" showDetail="true"/>
			
			<h:panelGrid columns="4" cellpadding="5" id="wrapper">
				
				<p:outputLabel for="password" value="Password:" />
				<p:password value="#{userManagement.password}" id="password"
					required="true" requiredMessage="Il campo è obbligatorio"
					feedback="true" inline="false"
					promptLabel="Immettere la password"
					weakLabel="Password debole" 
					goodLabel="Password accettabile" 
					strongLabel="Password forte"
					style="width: 250px;" />
				<p:watermark for="password" value="Immettere la password" />
				<p:message for="password" showSummary="true" showDetail="false"/>

				<p:outputLabel for="confirmPassword" value="Conferma password:" />
				<p:password value="#{userManagement.confirmPassword}" id="confirmPassword"
					required="true" requiredMessage="Il campo è obbligatorio"
					feedback="true" inline="false"
					promptLabel="Immettere la password"
					weakLabel="Password debole" 
					goodLabel="Password accettabile" 
					strongLabel="Password forte"
					style="width: 250px;" />
				<p:watermark for="confirmPassword" value="Confermare la password" />
				<p:message for="confirmPassword" showSummary="true" showDetail="false"/>


				<f:facet name="footer">
					<p:commandButton value="Cambia"
						actionListener="#{userManagement.doChangePassword}" 
						update="wrapper" 
						oncomplete="if(args.ok) {window.location.reload()}"/>

					<p:commandButton value="Annulla"
						oncomplete="changePasswordDialog.hide();" />
				</f:facet>
				
			</h:panelGrid>
			
		</h:form>

	</p:dialog>

</html>