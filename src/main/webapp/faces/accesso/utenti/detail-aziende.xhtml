<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
					
	<h:form>
	
		<p:growl 
			id="growl" 
			showSummary="false" 
			showDetail="true" 
			life="3000"	/>
								
		<p:outputPanel id="buttons" style="display: block; margin-top: 2em; margin-bottom: 2em;">

			<p:commandButton 
				value="Aggiorna aziende"
				actionListener="#{dettaglioUtenteAziende.doUpdateAziende}"
				update="growl"
				icon="ui-icon-disk" />

			<p:commandButton 
				value="Annulla default"
				actionListener="#{dettaglioUtenteAziende.doResetDefault}"
				update="aziendeTable"
				icon="ui-icon-cancel" />
				
		</p:outputPanel>

		<p:dataTable
			id="aziendeTable" 
			var="azienda" 
			value="#{dettaglioUtenteAziende.aziende}"
			widgetVar="aziendeTable"
			emptyMessage="Nessun record trovato"
			filteredValue="#{dettaglioUtenteAziende.filtered}"
			rowKey="#{azienda.id}"
			rowIndexVar="rowIndex"
			selection="#{dettaglioUtenteAziende.selected}"
			paginator="false">
			
			<p:ajax event="rowSelectCheckbox" 
				update="@this" 
				listener="#{dettaglioUtenteAziende.onRowSelectCheckbox}"/>
			
			<p:ajax event="rowUnselectCheckbox" 
				update="@this" 
				listener="#{dettaglioUtenteAziende.onRowSelectCheckbox}"/>
			
			<p:ajax event="toggleSelect" 
				update="@this" 
				listener="#{dettaglioUtenteAziende.onRowSelectCheckbox}"/>
					        		
			<f:facet name="header">
		    	Lista delle aziende disponibili
		
				<p:selectOneRadio id="customRadio"
					value="#{dettaglioUtenteAziende.codiceAziendaPreferita}" 
					layout="custom">
					<f:selectItems 
						value="#{dettaglioUtenteAziende.aziende}" var="item"
						itemLabel="#{item.codice}" itemValue="#{item.id}" />
				</p:selectOneRadio>  
		    </f:facet>

			<p:column selectionMode="multiple"/>
			
			<p:column headerText="Default">
				<p:radioButton for="customRadio" 
					itemIndex="#{rowIndex}" 
					disabled="#{dettaglioUtenteAziende.disabled[rowIndex]}"/>
            </p:column>
            
			<p:column headerText="Codice" 
				filterBy="#{azienda.codice}"
				filterMatchMode="contains"
				sortBy="#{azienda.codice}">
				<h:outputText value="#{azienda.codice}" />
			</p:column>

			<p:column headerText="Descrizione" 
				filterBy="#{azienda.descrizione}"
				filterMatchMode="contains"
				sortBy="#{azienda.descrizione}">
				<h:outputText value="#{azienda.descrizione}" />
			</p:column>
			
		</p:dataTable>

	</h:form>				

</html>