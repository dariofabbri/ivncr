<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:readonly="http://java.sun.com/jsf/composite/components/readonly">

	<p:panelGrid id="generalePanel" styleClass="multi-col-layout">
		
		<p:row>
		
			<p:column>
								
				<p:panelGrid styleClass="form-panel">
		
					<p:row>
						<p:column>		
							<p:outputLabel for="telefono1" value="Telefono 1:" />
						</p:column>
						<p:column>
							<p:inputText value="#{dettaglioClienteGenerale.telefono1}" id="telefono1"
								validator="phoneValidator" validatorMessage="Il numero immesso come contatto telefonico principale non è valido"/>
							<p:watermark for="telefono1" value="Primo contatto telefonico del cliente" />  
							<p:tooltip for="telefono1" showEffect="fade" value="Primo contatto telefonico del cliente" />
						</p:column>
					</p:row>
					
					<p:row>
						<p:column>
							<p:outputLabel for="telefono2" value="Telefono 2:" />
						</p:column>
						<p:column>
							<p:inputText value="#{dettaglioClienteGenerale.telefono2}" id="telefono2"
								validator="phoneValidator" validatorMessage="Il numero immesso come contatto telefonico alternativo non è valido"/>
							<p:watermark for="telefono2" value="Contatto telefonico alternativo del cliente"/>
							<p:tooltip for="telefono2" showEffect="fade" value="Contatto telefonico alternativo del cliente" />
						</p:column>
					</p:row>
		
					<p:row>
						<p:column>
							<p:outputLabel for="cellulare" value="Cellulare:" />
						</p:column>
						<p:column>
							<p:inputText value="#{dettaglioClienteGenerale.cellulare}" id="cellulare"
								validator="phoneValidator" validatorMessage="Il numero di cellulare inserito non è valido"/>
							<p:watermark for="cellulare" value="Contatto telefonico cellulare del cliente" />  
							<p:tooltip for="cellulare" showEffect="fade" value="Contatto telefonico cellulare del cliente" />
						</p:column>
					</p:row>
		
					<p:row>
						<p:column>
							<p:outputLabel for="fax" value="Fax:" />
						</p:column>
						<p:column>
							<p:inputText value="#{dettaglioClienteGenerale.fax}" id="fax"
								validator="phoneValidator" validatorMessage="Il numero di fax inserito non è valido"/>
							<p:watermark for="fax" value="Fax del cliente" />  
							<p:tooltip for="fax" showEffect="fade" value="Fax del cliente" />
						</p:column>
					</p:row>
		
					<p:row>
						<p:column>
							<p:outputLabel for="email" value="E-mail:" />
						</p:column>
						<p:column>
							<p:inputText value="#{dettaglioClienteGenerale.email}" id="email"
								validator="emailValidator" validatorMessage="L'indirizzo di posta elettronica inserito non è valido"/>
							<p:watermark for="email" value="Email del cliente" />  
							<p:tooltip for="email" showEffect="fade" value="Email del cliente" />
						</p:column>
					</p:row>
					
				</p:panelGrid>
				
			</p:column>
			
			<p:column>
	
				<p:fieldset 
					legend="Stato attivazione" 
					collapsed="true" toggleable="true" 
					toggleSpeed="500" 
					style="width: 500px;"> 
		
					<p:panelGrid id="statoAttivazionePanel" styleClass="form-panel">
					
						<p:row>
							<p:column>
								<h:outputText value="Attivo: " />
							</p:column>
							<p:column>  
								<readonly:checkbox value="#{dettaglioClienteGenerale.attivo}" />
							</p:column>	
							<p:column>
								<h:outputText value="dal:" />  
							</p:column>	
							<p:column>
								<h:outputText value="#{dettaglioClienteGenerale.attivoDal}" styleClass="info-label">
									<f:convertDateTime pattern="dd/MM/yyyy HH:mm" timeZone="#{appConfig.timeZone}" />
								</h:outputText>
			     			</p:column>
			     			<p:column>
						        <h:outputText value="al:" />
						    </p:column>  
			     			<p:column>
								<h:outputText value="#{dettaglioClienteGenerale.attivoAl}" styleClass="info-label">
									<f:convertDateTime pattern="dd/MM/yyyy HH:mm" timeZone="#{appConfig.timeZone}" />
								</h:outputText>
			     			</p:column>
			     		</p:row>
			     		<p:row>
			     			<p:column>
								<h:outputText value="Osservazioni: " />
			     			</p:column>
			     			<p:column colspan="5">
								<h:outputText value="#{dettaglioClienteGenerale.attivoNote}" styleClass="info-label"/>
							</p:column>
						</p:row>
						
						<p:row>
							<p:column colspan="6">
								<p:spacer height="40px;"/>
							</p:column>
						</p:row>

						<p:row>
							<p:column>
								<h:outputText value="Bloccato: " />
							</p:column>
							<p:column>  
								<readonly:checkbox value="#{dettaglioClienteGenerale.bloccato}" />
							</p:column>	
							<p:column>
								<h:outputText value="dal:" />  
							</p:column>	
							<p:column>
								<h:outputText value="#{dettaglioClienteGenerale.bloccatoDal}" styleClass="info-label">
									<f:convertDateTime pattern="dd/MM/yyyy HH:mm" timeZone="#{appConfig.timeZone}" />
								</h:outputText>
			     			</p:column>
			     			<p:column>
						        <h:outputText value="al:" />
						    </p:column>  
			     			<p:column>
								<h:outputText value="#{dettaglioClienteGenerale.bloccatoAl}" styleClass="info-label">
									<f:convertDateTime pattern="dd/MM/yyyy HH:mm" timeZone="#{appConfig.timeZone}" />
								</h:outputText>
			     			</p:column>
			     		</p:row>
			     		<p:row>
			     			<p:column>
								<h:outputText value="Osservazioni: " />
			     			</p:column>
			     			<p:column colspan="5">
								<h:outputText value="#{dettaglioClienteGenerale.bloccatoNote}" styleClass="info-label"/>
							</p:column>
						</p:row>
																		
						<p:row>				
							<p:column colspan="2" styleClass="form-footer">
								<c:if test="#{dettaglioClienteGenerale.bloccato}">
									<p:commandButton
										id="activateButton"
										value="Attiva"
										process="@this"
										update=":detailForm:tabView:activateDialog"
										actionListener="#{dettaglioClienteGenerale.prepareActivation}"
										oncomplete="activateDialogWidget.show()"/>
									<p:tooltip 
										for="activateButton" 
										value="Attiva il cliente precedentemente bloccato" 
										showEffect="fade" 
										hideEffect="fade"/>
								</c:if>
								<c:if test="#{dettaglioClienteGenerale.attivo}"> 
									<p:commandButton
										id="deactivateButton"
										value="Blocca"
										process="@this"
										update=":detailForm:tabView:activateDialog"
										actionListener="#{dettaglioClienteGenerale.prepareActivation}"
										oncomplete="activateDialogWidget.show()"/>
									<p:tooltip 
										for="deactivateButton" 
										value="Blocca il cliente" 
										showEffect="fade" 
										hideEffect="fade"/>
								</c:if>
							</p:column>
						</p:row>
									
					</p:panelGrid>
					
				</p:fieldset>
			
			</p:column>
			
		</p:row>
		
	</p:panelGrid>
	
		
	<p:dialog
		id="activateDialog"
		header="#{dettaglioClienteGenerale.attivo ? 'Blocco cliente' : 'Attivazione cliente'}" 
		widgetVar="activateDialogWidget" 
		modal="true"
		showEffect="fade" 
		hideEffect="fade"> 
				
		<p:messages id="activateDialogMessages" globalOnly="false" showSummary="false" showDetail="true" closable="true"/>
		
		<p:panelGrid id="activateDialogPanel" styleClass="form-panel">
			
			<p:row>
				<p:column styleClass="form-header">
					<c:if test="#{dettaglioClienteGenerale.attivo}">
						<h:outputText value="
							Il pannello permette di bloccare il cliente selezionato. 
							Di seguito è necessario introdurre una breve annotazione 
							per procedere con l'operazione."/>					
					</c:if>
					<c:if test="#{dettaglioClienteGenerale.bloccato}">
						<h:outputText value="
							Il pannello permette di attivare il cliente selezionato. 
							Di seguito è necessario introdurre una breve annotazione 
							per procedere con l'operazione."/>
					</c:if>
				</p:column>
			</p:row>
			
			<p:row>
				<p:column>
					<p:inputTextarea
						value="#{dettaglioClienteGenerale.note}"
						rows="7"
						required="true"
						requiredMessage="E' necessario introdurre un'annotazione" />
				</p:column>
			</p:row>	
			
			<p:row>
				<p:column styleClass="form-footer">
					<p:commandButton value="#{dettaglioClienteGenerale.attivo ? 'Blocca' : 'Attiva'}"
						actionListener="#{dettaglioClienteGenerale.doToggleActivation}"
						process="activateDialog"
						update="activateDialogPanel,activateDialogMessages,statoAttivazionePanel"
						oncomplete="if(args.ok) { activateDialogWidget.hide(); }"/>
					<p:commandButton value="Annulla"
						oncomplete="activateDialogWidget.hide();" />
				</p:column>
			</p:row>
		
		</p:panelGrid>
		
	</p:dialog>

</html>