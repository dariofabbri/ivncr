<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
	
	<p:outputPanel id="buttons" style="display: block; margin-top: 2em; margin-bottom: 2em;">

		<p:commandButton
			id="createButton"
			value="Crea"
			type="button"
			onclick="createContattoDialogWidget.show();"
			icon="ui-icon-star"/>
		<p:tooltip 
			for="createButton" 
			value="Crea un nuovo contatto" 
			showEffect="fade" 
			hideEffect="fade"/>

		<p:commandButton
			id="deleteButton"
			value="Elimina"
			type="button"
			disabled="#{dettaglioClienteContatti.selected == null}"
			onclick="deleteContattoDialogWidget.show();"
			icon="ui-icon-trash" />
		<p:tooltip 
			for="deleteButton" 
			value="Elimina il contatto selezionato" 
			showEffect="fade" 
			hideEffect="fade"/>

		<p:commandButton
			id="updateButton" 
			value="Modifica"
			type="button"
			disabled="#{dettaglioClienteContatti.selected == null}"
			action="#{dettaglioClienteContatti.startUpdate}"
			icon="ui-icon-pencil" />
		<p:tooltip 
			for="updateButton" 
			value="Modifica il contatto selezionato" 
			showEffect="fade" 
			hideEffect="fade"/>

	</p:outputPanel>
									
	<p:dataTable var="contatto" 
		value="#{dettaglioClienteContatti.model}"
		paginator="true" 
		paginatorPosition="bottom" rows="10"
		paginatorTemplate="{CurrentPageReport} {RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
		currentPageReportTemplate="Trovati {totalRecords} record - Pagina {currentPage} di {totalPages}"
		rowsPerPageTemplate="5,10,50" 
		pageLinks="10"
		emptyMessage="Nessun record trovato" 
		selectionMode="single"
		selection="#{dettaglioClienteContatti.selected}" 
		id="contattiTable" 
		lazy="true">

		<!--
		<p:ajax event="rowSelect" update="buttons,:updateForm"/>
		<p:ajax event="rowUnselect" update="buttons,:updateForm"/>
		-->
		<p:ajax event="rowSelect" process="@this" update=":detailForm:tabView:buttons"/>
		<p:ajax event="rowUnselect" process="@this" update=":detailForm:tabView:buttons"/>
      		
		<f:facet name="header">
	    	Lista dei contatti
	    </f:facet>

		<p:column headerText="Nome" sortBy="#{contatto.nome}"
			filterBy="#{contatto.nome}">
			<h:outputText value="#{contatto.nome}" />
		</p:column>

		<p:column headerText="Telefono 1" sortBy="#{contatto.telefono1}"
			filterBy="#{contatto.telefono1}">
			<h:outputText value="#{contatto.telefono1}" />
		</p:column>

		<p:column headerText="Telefono 2" sortBy="#{contatto.telefono2}"
			filterBy="#{contatto.telefono2}">
			<h:outputText value="#{contatto.telefono2}" />
		</p:column>

		<p:column headerText="Cellulare" sortBy="#{contatto.cellulare}"
			filterBy="#{contatto.cellulare}">
			<h:outputText value="#{contatto.cellulare}" />
		</p:column>

		<p:column headerText="Fax" sortBy="#{contatto.fax}"
			filterBy="#{contatto.fax}">
			<h:outputText value="#{contatto.fax}" />
		</p:column>

		<p:column headerText="Email" sortBy="#{contatto.email}"
			filterBy="#{contatto.email}">
			<h:outputText value="#{contatto.email}" />
		</p:column>

	</p:dataTable>

	<ui:include src="detail-contatti-create.xhtml"/>
	
</html>